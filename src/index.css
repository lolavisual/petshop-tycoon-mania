@tailwind base;
@tailwind components;
@tailwind utilities;

/* PetShop Tycoon - Glassmorphism Design System */
@import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&display=swap');

@layer base {
  :root {
    /* Основные цвета - теплая зоомагазин палитра */
    --background: 25 100% 97%;
    --foreground: 25 30% 15%;

    --card: 0 0% 100%;
    --card-foreground: 25 30% 15%;

    --popover: 0 0% 100%;
    --popover-foreground: 25 30% 15%;

    /* Основной - теплый оранжевый */
    --primary: 28 100% 55%;
    --primary-foreground: 0 0% 100%;
    --primary-glow: 28 100% 65%;

    /* Вторичный - мятный */
    --secondary: 160 50% 45%;
    --secondary-foreground: 0 0% 100%;

    /* Акцент - золотой */
    --accent: 45 100% 50%;
    --accent-foreground: 25 30% 15%;

    --muted: 25 20% 92%;
    --muted-foreground: 25 15% 50%;

    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;

    --border: 25 30% 88%;
    --input: 25 30% 88%;
    --ring: 28 100% 55%;

    --radius: 1rem;

    /* Кристаллы и алмазы */
    --crystal: 200 100% 60%;
    --crystal-glow: 200 100% 75%;
    --diamond: 280 100% 70%;
    --diamond-glow: 280 100% 85%;
    --stone: 35 30% 50%;
    --stone-glow: 35 40% 65%;
    --gold: 45 100% 50%;
    --gold-glow: 45 100% 65%;

    /* Glassmorphism */
    --glass-bg: 0 0% 100% / 0.7;
    --glass-border: 0 0% 100% / 0.3;
    --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.1);

    /* Градиенты */
    --gradient-primary: linear-gradient(135deg, hsl(28, 100%, 55%), hsl(35, 100%, 60%));
    --gradient-secondary: linear-gradient(135deg, hsl(160, 50%, 45%), hsl(170, 60%, 50%));
    --gradient-accent: linear-gradient(135deg, hsl(45, 100%, 50%), hsl(50, 100%, 60%));
    --gradient-crystal: linear-gradient(135deg, hsl(200, 100%, 60%), hsl(210, 100%, 70%));
    --gradient-diamond: linear-gradient(135deg, hsl(280, 100%, 70%), hsl(290, 100%, 80%));
    --gradient-santa: linear-gradient(180deg, hsl(0, 70%, 50%), hsl(0, 70%, 40%));
    --gradient-sky: linear-gradient(180deg, hsl(200, 80%, 85%), hsl(200, 60%, 95%));
    --gradient-sunset: linear-gradient(180deg, hsl(30, 100%, 85%), hsl(45, 100%, 90%), hsl(200, 80%, 90%));

    /* Sidebar */
    --sidebar-background: 25 50% 96%;
    --sidebar-foreground: 25 30% 25%;
    --sidebar-primary: 28 100% 55%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 25 30% 92%;
    --sidebar-accent-foreground: 25 30% 25%;
    --sidebar-border: 25 30% 88%;
    --sidebar-ring: 28 100% 55%;
  }

  .dark {
    --background: 25 30% 8%;
    --foreground: 25 20% 95%;

    --card: 25 30% 12%;
    --card-foreground: 25 20% 95%;

    --popover: 25 30% 12%;
    --popover-foreground: 25 20% 95%;

    --primary: 28 100% 55%;
    --primary-foreground: 0 0% 100%;

    --secondary: 160 50% 40%;
    --secondary-foreground: 0 0% 100%;

    --accent: 45 100% 50%;
    --accent-foreground: 25 30% 10%;

    --muted: 25 20% 18%;
    --muted-foreground: 25 15% 60%;

    --destructive: 0 70% 50%;
    --destructive-foreground: 0 0% 100%;

    --border: 25 20% 20%;
    --input: 25 20% 20%;
    --ring: 28 100% 55%;

    --glass-bg: 25 30% 15% / 0.7;
    --glass-border: 0 0% 100% / 0.1;

    --sidebar-background: 25 30% 10%;
    --sidebar-foreground: 25 20% 90%;
    --sidebar-primary: 28 100% 55%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 25 25% 15%;
    --sidebar-accent-foreground: 25 20% 90%;
    --sidebar-border: 25 20% 18%;
    --sidebar-ring: 28 100% 55%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground font-nunito antialiased;
    font-feature-settings: "rlig" 1, "calt" 1;
    -webkit-tap-highlight-color: transparent;
    user-select: none;
  }

  html {
    scroll-behavior: smooth;
  }
}

@layer components {
  /* Glassmorphism карточка - Enhanced */
  .glass-card {
    @apply relative overflow-hidden rounded-2xl;
    background: hsl(var(--glass-bg));
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid hsl(var(--glass-border));
    box-shadow: var(--glass-shadow);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .glass-card:hover {
    border-color: hsl(var(--primary) / 0.2);
    box-shadow: 0 12px 40px -8px hsl(var(--primary) / 0.15);
  }

  /* Premium glass card with shine effect */
  .glass-card-premium {
    @apply glass-card;
    background: linear-gradient(135deg, hsl(var(--glass-bg)), hsl(var(--primary) / 0.05));
    border: 1px solid hsl(var(--primary) / 0.15);
  }

  .glass-card-premium::before {
    content: '';
    @apply absolute inset-0 pointer-events-none;
    background: linear-gradient(90deg, transparent 0%, hsl(0 0% 100% / 0.1) 50%, transparent 100%);
    animation: shine 3s ease-in-out infinite;
  }

  /* Interactive card with hover lift */
  .card-interactive {
    @apply glass-card cursor-pointer;
    transform-style: preserve-3d;
    perspective: 1000px;
  }

  .card-interactive:hover {
    transform: translateY(-4px) scale(1.01);
    box-shadow: 0 20px 50px -12px hsl(var(--primary) / 0.25);
  }

  .card-interactive:active {
    transform: translateY(-2px) scale(0.99);
  }

  /* Градиентные кнопки - Enhanced */
  .btn-gradient-primary {
    @apply relative overflow-hidden rounded-xl px-6 py-3 font-bold text-primary-foreground transition-all duration-300;
    background: var(--gradient-primary);
    box-shadow: 0 4px 15px hsl(var(--primary) / 0.4);
  }

  .btn-gradient-primary::before {
    content: '';
    @apply absolute inset-0 opacity-0 transition-opacity duration-300;
    background: linear-gradient(135deg, hsl(0 0% 100% / 0.2), transparent);
  }

  .btn-gradient-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px hsl(var(--primary) / 0.5);
  }

  .btn-gradient-primary:hover::before {
    @apply opacity-100;
  }

  .btn-gradient-primary:active {
    transform: translateY(0) scale(0.98);
  }

  .btn-gradient-secondary {
    @apply relative overflow-hidden rounded-xl px-6 py-3 font-bold text-secondary-foreground transition-all duration-300;
    background: var(--gradient-secondary);
    box-shadow: 0 4px 15px hsl(var(--secondary) / 0.4);
  }

  .btn-gradient-secondary:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px hsl(var(--secondary) / 0.5);
  }

  .btn-gradient-accent {
    @apply relative overflow-hidden rounded-xl px-6 py-3 font-bold text-accent-foreground transition-all duration-300;
    background: var(--gradient-accent);
    box-shadow: 0 4px 15px hsl(var(--accent) / 0.4);
  }

  .btn-gradient-accent:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px hsl(var(--accent) / 0.5);
  }

  /* Modern nav button */
  .nav-button {
    @apply relative flex flex-col items-center gap-1 px-4 py-2 rounded-2xl transition-all duration-300;
    @apply text-muted-foreground;
  }

  .nav-button:hover {
    @apply text-foreground bg-muted/50;
  }

  .nav-button.active {
    @apply text-primary;
    background: linear-gradient(180deg, hsl(var(--primary) / 0.1) 0%, transparent 100%);
  }

  .nav-button.active .nav-icon {
    animation: icon-bounce 0.6s ease-out;
  }

  /* Nav indicator pill */
  .nav-indicator-pill {
    @apply absolute -bottom-1 h-1 rounded-full;
    background: var(--gradient-primary);
    box-shadow: 0 0 12px hsl(var(--primary) / 0.6);
    animation: nav-indicator 0.3s ease-out forwards;
  }

  /* Enhanced badge */
  .notification-badge {
    @apply absolute -top-1.5 -right-1.5 min-w-[20px] h-5 flex items-center justify-center;
    @apply text-[10px] font-bold rounded-full px-1.5;
    background: linear-gradient(135deg, hsl(var(--destructive)), hsl(0 70% 45%));
    color: hsl(var(--destructive-foreground));
    box-shadow: 0 2px 8px hsl(var(--destructive) / 0.5);
    animation: badge-pop 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  /* Валюты */
  .currency-crystal {
    @apply inline-flex items-center gap-1.5 font-bold;
    color: hsl(var(--crystal));
    text-shadow: 0 0 10px hsl(var(--crystal-glow) / 0.5);
  }

  .currency-diamond {
    @apply inline-flex items-center gap-1.5 font-bold;
    color: hsl(var(--diamond));
    text-shadow: 0 0 10px hsl(var(--diamond-glow) / 0.5);
  }

  .currency-stone {
    @apply inline-flex items-center gap-1.5 font-bold;
    color: hsl(var(--stone));
  }

  /* Tap zone - Enhanced */
  .tap-zone {
    @apply relative cursor-pointer select-none;
    -webkit-touch-callout: none;
    touch-action: manipulation;
  }

  .tap-zone::before {
    content: '';
    @apply absolute inset-0 rounded-full opacity-0 transition-opacity duration-300;
    background: radial-gradient(circle, hsl(var(--primary) / 0.3) 0%, transparent 70%);
  }

  .tap-zone:active::before {
    @apply opacity-100;
  }

  /* Parallax background */
  .parallax-bg {
    @apply fixed inset-0 -z-10 overflow-hidden;
    background: var(--gradient-sunset);
  }

  .parallax-layer {
    @apply absolute w-full will-change-transform;
    transform-style: preserve-3d;
  }

  /* Floating animation */
  .float-animation {
    animation: float 3s ease-in-out infinite;
  }

  /* Pulse glow */
  .pulse-glow {
    animation: pulseGlow 2s ease-in-out infinite;
  }

  /* Santa hat animation */
  .santa-hat-enter {
    animation: santaHatEnter 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  }

  /* Level up burst */
  .level-up-burst {
    animation: levelUpBurst 0.6s ease-out forwards;
  }

  /* Nav item active */
  .nav-active {
    @apply relative;
  }

  .nav-active::after {
    content: '';
    @apply absolute -bottom-1 left-1/2 h-1 w-6 -translate-x-1/2 rounded-full;
    background: var(--gradient-primary);
    box-shadow: 0 0 12px hsl(var(--primary));
  }

  /* Golden card - Enhanced */
  .golden-card {
    @apply relative overflow-hidden;
    background: linear-gradient(135deg, hsl(45 100% 50% / 0.15), hsl(35 100% 60% / 0.08));
    border: 2px solid hsl(var(--gold) / 0.4);
    box-shadow: 0 4px 20px hsl(var(--gold) / 0.2);
  }

  .golden-card::before {
    content: '';
    @apply absolute inset-0;
    background: linear-gradient(90deg, transparent, hsl(var(--gold) / 0.2), transparent);
    animation: shimmer 2.5s infinite;
  }

  /* Achievement card states */
  .achievement-card {
    @apply glass-card p-4 rounded-2xl transition-all duration-300;
  }

  .achievement-card.unlocked {
    @apply border-2;
    border-color: hsl(var(--primary) / 0.4);
    background: linear-gradient(135deg, hsl(var(--primary) / 0.08), transparent);
  }

  .achievement-card.claimable {
    animation: glow-pulse 2s ease-in-out infinite;
  }

  .achievement-card.locked {
    @apply opacity-60;
  }

  /* Progress bar - Enhanced */
  .progress-xp {
    @apply h-3 overflow-hidden rounded-full;
    background: hsl(var(--muted));
  }

  .progress-xp-fill {
    @apply h-full rounded-full transition-all duration-500 relative overflow-hidden;
    background: var(--gradient-secondary);
    box-shadow: 0 0 15px hsl(var(--secondary) / 0.5);
  }

  .progress-xp-fill::after {
    content: '';
    @apply absolute inset-0;
    background: linear-gradient(90deg, transparent 0%, hsl(0 0% 100% / 0.3) 50%, transparent 100%);
    animation: shimmer 2s infinite;
  }

  /* Category pill */
  .category-pill {
    @apply flex-shrink-0 px-4 py-2.5 rounded-2xl font-semibold text-sm transition-all duration-300;
    @apply border border-transparent;
  }

  .category-pill.active {
    background: var(--gradient-primary);
    @apply text-primary-foreground;
    box-shadow: 0 4px 15px hsl(var(--primary) / 0.4);
  }

  .category-pill:not(.active) {
    @apply glass-card text-muted-foreground;
  }

  .category-pill:not(.active):hover {
    @apply text-foreground border-primary/20;
  }

  /* Product card hover */
  .product-card {
    @apply glass-card rounded-2xl overflow-hidden transition-all duration-300;
  }

  .product-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 16px 40px -8px hsl(var(--primary) / 0.2);
  }

  /* Scrollbar - Enhanced */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  ::-webkit-scrollbar-track {
    background: hsl(var(--muted));
    border-radius: 3px;
  }

  ::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, hsl(var(--primary) / 0.5), hsl(var(--primary) / 0.3));
    border-radius: 3px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, hsl(var(--primary) / 0.7), hsl(var(--primary) / 0.5));
  }

  /* Stats card */
  .stats-card {
    @apply glass-card-premium p-4 rounded-2xl space-y-3;
    border: 1px solid hsl(var(--primary) / 0.15);
  }

  /* Icon with glow */
  .icon-glow {
    filter: drop-shadow(0 0 8px currentColor);
  }
}

@layer utilities {
  .text-gradient-primary {
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .text-gradient-crystal {
    background: var(--gradient-crystal);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .text-gradient-diamond {
    background: var(--gradient-diamond);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
}

@keyframes float {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}

@keyframes pulseGlow {
  0%, 100% {
    opacity: 1;
    filter: drop-shadow(0 0 5px currentColor);
  }
  50% {
    opacity: 0.8;
    filter: drop-shadow(0 0 15px currentColor);
  }
}

@keyframes santaHatEnter {
  0% {
    transform: translateY(-100%) rotate(-30deg);
    opacity: 0;
  }
  60% {
    transform: translateY(10%) rotate(5deg);
  }
  80% {
    transform: translateY(-5%) rotate(-2deg);
  }
  100% {
    transform: translateY(0) rotate(0);
    opacity: 1;
  }
}

@keyframes levelUpBurst {
  0% {
    transform: scale(0.8);
    opacity: 1;
  }
  50% {
    transform: scale(1.3);
    opacity: 0.8;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

@keyframes tapRipple {
  0% {
    transform: scale(0);
    opacity: 0.6;
  }
  100% {
    transform: scale(2);
    opacity: 0;
  }
}

@keyframes crystalFloat {
  0% {
    transform: translateY(0) scale(1);
    opacity: 1;
  }
  100% {
    transform: translateY(-60px) scale(0.5);
    opacity: 0;
  }
}
